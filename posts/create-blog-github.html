<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>lMC`s Blog | posts</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta data-n-head="ssr" name="keywords" content="李明灿的博客, lMC`s Blog"><meta data-n-head="ssr" data-hid="description" name="description" content="李明灿的博客，用来记录李明灿平时项目的一些总结，复盘"><meta data-n-head="ssr" name="author" content="804666207@qq.com"><meta data-n-head="ssr" name="renderer" content="webkit"><meta data-n-head="ssr" data-hid="keywornd" name="keywornd" content="undefined"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="./lMC.ico"><link rel="preload" href="/_nuxt/54b523b.js" as="script"><link rel="preload" href="/_nuxt/0a345ca.js" as="script"><link rel="preload" href="/_nuxt/css/2ec053a.css" as="style"><link rel="preload" href="/_nuxt/ab7f0fb.js" as="script"><link rel="preload" href="/_nuxt/css/6fb624f.css" as="style"><link rel="preload" href="/_nuxt/c408fa5.js" as="script"><link rel="preload" href="/_nuxt/css/6b223da.css" as="style"><link rel="preload" href="/_nuxt/0c653ed.js" as="script"><link rel="stylesheet" href="/_nuxt/css/2ec053a.css"><link rel="stylesheet" href="/_nuxt/css/6fb624f.css"><link rel="stylesheet" href="/_nuxt/css/6b223da.css"><link rel="preload" href="/_nuxt/static/1644082532/posts/create-blog-github/state.js" as="script"><link rel="preload" href="/_nuxt/static/1644082532/posts/create-blog-github/payload.js" as="script"><link rel="preload" href="/_nuxt/static/1644082532/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="posts_content" data-v-66e15f41><header data-v-4a6bfdeb data-v-66e15f41><div class="t" data-v-4a6bfdeb><h1 data-v-4a6bfdeb><a href="/" class="nuxt-link-active" data-v-4a6bfdeb><img src="/_nuxt/img/leaves.6f4df34.png" width="30" data-v-4a6bfdeb>Posts</a></h1> <nav data-v-4a6bfdeb><a href="/" class="nuxt-link-active" data-v-4a6bfdeb>主页</a> <a href="/about" class="about_btn" data-v-4a6bfdeb>关于</a></nav></div></header> <main data-v-79618e5e data-v-66e15f41><article id="markdown-body" class="md_content markdown-body" data-v-79618e5e><h1>如何使用<code>nuxtJs</code>在<code>github.io</code>搭建自己博客</h1>
<blockquote>
<p>可以使用<code>nuxtJS</code> <code>DIY</code>一个专属自己的博客，利用 <code>markdown</code> 来记录博客</p>
</blockquote>
<h2>概述</h2>
<ol>
<li>设置 <code>github</code> 上的个人主页</li>
<li>在本地构建项目</li>
<li>部署踩坑</li>
</ol>
<blockquote>
<h3>设置 <code>github</code> 上的个人主页</h3>
</blockquote>
<ol>
<li>
<p>新建一个项目<br>
登录<code>github</code>以后，点击主页的 <code>New</code> 按钮新建一个代表个人主页的仓库
<img src="../md/create-blog-github/step_1.png" alt="">
仓库名字自取，可以取<code>姓名全拼</code> + <code>github.io</code>，博主的个人主页仓库名叫就是：<code>limingcan562.github.io</code></p>
</li>
<li>
<p>完成以后回到主页你会发现仓库多了一个叫 <code>limingcan562.github.io</code> 的仓库（<em>请取你自己的名字</em>），进入以后点击 <code>Settings</code>
<img src="../md/create-blog-github/step_3.png" alt=""></p>
</li>
<li>
<p>设置未来 <code>github.io</code> 主页的链接<br>
进入到自己刚刚建好的仓库进行配置
<img src="../md/create-blog-github/step_2.png" alt=""></p>
<p><strong>注意：</strong></p>
<ul>
<li><code>Repository name</code> 请填写前面的 <code>Owner</code> 名字 + <code>.github.io</code></li>
<li>如图示，<code>Repository name</code> 就应该写 <code>limingcan562.github.io</code> 这样后面可以直接用 <code>limingcan562.github.io</code> 打开你的个人主页</li>
</ul>
</li>
<li>
<p>修改个人主页映射对应的仓库分支
<img src="../md/create-blog-github/step_4.png" alt=""></p>
<p><strong>注意：</strong></p>
<ul>
<li>我是将打包好的文件推送到仓库的<code>gh-pages</code>分支，所以需要把个人主页映射到<code>gh-pages</code>分支，这样当你打开个人主页是，其实看到的是编译好的<code>gh-pages</code>分支内容</li>
<li>推送 <code>gh-pages</code> 也是个坑，后续会讲</li>
</ul>
</li>
<li>
<p>OK，目前我们<code>github</code>部分就完成了</p>
</li>
</ol>
<blockquote>
<h3>在本地构建项目</h3>
</blockquote>
<p>这个就不过多的赘述了，因为我的博客是用<code>nuxtJs</code>做的，所以直接上官网看看文档，直接搞个<code>demo</code>项目下来，这里主要介绍下我用到的插件文档</p>
<ul>
<li><a href="https://www.nuxtjs.cn/"><code>nuxtJs</code></a></li>
<li><a href="https://www.npmjs.com/package/"><code>frontmatter-markdown-loader</code></a>用来编译<code>md</code>的<code>loader</code></li>
<li><a href="https://www.npmjs.com/package/github-markdown-css"><code>github-markdown-css</code></a> 美化编译后的<code>md</code></li>
<li><a href="https://www.npmjs.com/package/prismjs"><code>prismjs</code></a> 用来高亮<code>md</code></li>
<li><a href="https://www.npmjs.com/package/gh-pages"><code>gh-pages</code></a> 用来发布打包文件到<code>github</code>的<code>gh-pages</code>分支</li>
</ul>
<blockquote>
<h3>部署踩坑</h3>
</blockquote>
<ol>
<li>用<code>soureceTree</code>一直推不上<code>github</code>或者拉不下代码，等了好久以后报错问题！</li>
<li>使用<code>gh-pages</code>推送分支部署时，老是报错！</li>
<li>代码推到<code>gh-pages</code> 分支后，为什么不能预览，资源<code>404</code>！</li>
</ol>
<ul>
<li>
<h4>用<code>soureceTree</code>一直推不上<code>github</code>或者拉不下代码，等了好久以后报错问题！</h4>
</li>
</ul>
<p>不知道用<code>soureceTree</code>的同学有没有遇到过，在拉<code>github</code>代码或者推代码到<code>github</code>时，发现等了很久，结果后面发现各种各样的报错，或者一直弹出要输入github账号密码，就十分的烦躁...但后面上网各种找答案以后，终于有办法可以解决：<br>
<strong>不要用<code>https</code>的方式连接<code>github</code>仓库，一定要用<code>ssh</code>方式连接仓库</strong></p>
<p><code>mac</code>端跟着网上配置<code>ssh</code>到<code>github</code>的步骤走，问题不大，但是在生成<code>ssh</code>时，会提示要你输入密码，此时不要输入密码，一路回车就好了，这样后面推送代码的时候，就不会再提示输入密码。这里讲下<code>window</code>环境下怎么弄<br>
在配置好<code>ssh</code>到<code>github</code>以后，我们会发现<code>window</code>的<code>souceTree</code>拉取代码还是有问题，这里需要设置一下：<br>
进入<code>工具</code> --> <code>选项</code>
<img src="../md/create-blog-github/step_5.png" alt="">
这样设置好以后，关掉<code>sourceTree</code>重新推一下就好了</p>
<ul>
<li>
<h4>使用<code>gh-pages</code>推送分支部署时，老是报错！</h4>
</li>
</ul>
<p>有时我们可能使用<code>gh-pages</code>推送分支，或者把远程<code>gh-pages</code>删除在推送，或者做了什么乱七八糟的操作以后，发现经常报错，类似：</p>
<pre><code class="language-javascript">{"code":128,"message":"fatal: couldn't find remote ref refs/heads/gh-pages\n","name":"ProcessError"}
</code></pre>
<p>就会十分的崩溃，但是在查阅了很多资料以后发现还是有解决方案的：</p>
<ol>
<li>在项目下的终端运行：<code>node node_modules/gh-pages/bin/gh-pages-clean</code>；然后再推送，你会发现问题迎刃而解！可以参考<a href="https://www.bountysource.com/teams/gh-pages/issues">这篇文章</a></li>
<li><strong>将<code>deploy.js</code>里面的<code>repo</code>改成<code>ssh</code>链接，就好了（这个是最重要的！）</strong></li>
</ol>
<ul>
<li>
<h4>代码推到<code>gh-pages</code> 分支后，为什么不能预览，资源<code>404</code>！</h4>
</li>
</ul>
<p>首先，我们使用<code>gh-pages</code>提交代码到<code>gh-pages</code>分支时，我们会看到，里面的文件都有，但是就是没有<code>.nojekyll</code>，<strong>没有<code>.nojekyll</code></strong> 是最根本的原因，默认<code>gh-pages</code>是不会把点文件推上去的
因为如果<code>github</code>上没有这个文件，是会忽略掉其他<code>_</code>开头的文件的，因此即使<code>github</code>上有<code>_nuxt</code>文件，一样会找不到资源，因为它会被略了，具体可以参考<a href="https://www.cnblogs.com/babywhale/p/13560573.html">这篇文章</a><br>
所以我们需要在<code>deploy.js</code>文件里改一下配置：</p>
<pre><code class="language-javascript">ghpages.publish('./dist', {
    branch: 'gh-pages',
    repo: '你的仓库ssh地址',
    dotfiles: true,  // 很重要！！
    message: 'deploy'
}, err => {});
</code></pre>
<p>重点是把<code>dotfiles: true</code>，这样<code>.nojekyll</code>才能推上去</p>
</article></main> <footer data-v-520cc4ae data-v-66e15f41><nav data-v-520cc4ae><ul data-v-520cc4ae><li data-v-520cc4ae><a href="/" class="nuxt-link-active" data-v-520cc4ae>home</a></li><li data-v-520cc4ae><a href="/about" data-v-520cc4ae>about</a></li></ul></nav> <p class="des" data-v-520cc4ae>written by <img src="/_nuxt/img/leaves.6f4df34.png" width="15" data-v-520cc4ae> lMC</p></footer></div></div></div><script defer src="/_nuxt/static/1644082532/posts/create-blog-github/state.js"></script><script src="/_nuxt/54b523b.js" defer></script><script src="/_nuxt/0c653ed.js" defer></script><script src="/_nuxt/0a345ca.js" defer></script><script src="/_nuxt/ab7f0fb.js" defer></script><script src="/_nuxt/c408fa5.js" defer></script>
  </body>
</html>
